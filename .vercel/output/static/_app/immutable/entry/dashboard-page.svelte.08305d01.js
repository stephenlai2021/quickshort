import{S as ae,i as ne,s as oe,a4 as H,q as M,a5 as O,m as _,r as N,h as d,n as t,b as W,I as u,N as xe,k,a as S,y as ie,l as w,c as j,z as ue,a6 as se,A as ce,J as he,a7 as Ce,u as K,g as X,d as Z,B as de,K as Ve,L as Q,o as $e,a3 as pe,f as Ae,a2 as Be,v as Se}from"../chunks/index.c1267f9a.js";import{t as Ie}from"../chunks/translations.1a06fbbc.js";import{l as _e,u as je,k as me,t as ze,c as Le}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.68aafece.js";import{s as Pe}from"../chunks/supabase.1462ff8c.js";import"../chunks/navigation.29a5591a.js";import{C as Me}from"../chunks/CopyBtn.a345c101.js";import{p as Ne}from"../chunks/stores.784d6eaa.js";let Ue=(o=21)=>crypto.getRandomValues(new Uint8Array(o)).reduce((e,l)=>(l&=63,l<36?e+=l.toString(36):l<62?e+=(l-26).toString(36).toUpperCase():l>62?e+="-":e+="_",e),"");function Re(o){let e,l,a,s,r,h;return{c(){e=H("svg"),l=H("title"),a=M("Help Circle"),s=H("path"),r=H("path"),h=H("circle"),this.h()},l(c){e=O(c,"svg",{xmlns:!0,class:!0,viewBox:!0,width:!0});var i=_(e);l=O(i,"title",{});var b=_(l);a=N(b,"Help Circle"),b.forEach(d),s=O(i,"path",{d:!0,fill:!0,stroke:!0,"stroke-miterlimit":!0,"stroke-width":!0}),_(s).forEach(d),r=O(i,"path",{d:!0,fill:!0,stroke:!0,"stroke-linecap":!0,"stroke-miterlimit":!0,"stroke-width":!0}),_(r).forEach(d),h=O(i,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),_(h).forEach(d),i.forEach(d),this.h()},h(){t(s,"d","M256 80a176 176 0 10176 176A176 176 0 00256 80z"),t(s,"fill","none"),t(s,"stroke","#CDD1D6"),t(s,"stroke-miterlimit","10"),t(s,"stroke-width","32"),t(r,"d","M200 202.29s.84-17.5 19.57-32.57C230.68 160.77 244 158.18 256 158c10.93-.14 20.69 1.67 26.53 4.45 10 4.76 29.47 16.38 29.47 41.09 0 26-17 37.81-36.37 50.8S251 281.43 251 296"),t(r,"fill","none"),t(r,"stroke","#CDD1D6"),t(r,"stroke-linecap","round"),t(r,"stroke-miterlimit","10"),t(r,"stroke-width","28"),t(h,"cx","250"),t(h,"cy","348"),t(h,"r","20"),t(h,"fill","#CDD1D6"),t(e,"xmlns","http://www.w3.org/2000/svg"),t(e,"class","ionicon"),t(e,"viewBox","0 0 512 512"),t(e,"width",o[0])},m(c,i){W(c,e,i),u(e,l),u(l,a),u(e,s),u(e,r),u(e,h)},p(c,[i]){i&1&&t(e,"width",c[0])},i:xe,o:xe,d(c){c&&d(e)}}}function Te(o,e,l){let{width:a="24"}=e;return o.$$set=s=>{"width"in s&&l(0,a=s.width)},[a]}class Fe extends ae{constructor(e){super(),ne(this,e,Te,Re,oe,{width:0})}}function qe(o){let e,l=o[1]("common.shorten")+"",a,s,r,h;return{c(){e=k("span"),a=M(l),s=S(),r=H("svg"),h=H("path"),this.h()},l(c){e=w(c,"SPAN",{class:!0});var i=_(e);a=N(i,l),i.forEach(d),s=j(c),r=O(c,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0,width:!0,height:!0});var b=_(r);h=O(b,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(h).forEach(d),b.forEach(d),this.h()},h(){t(e,"class","w-ful"),t(h,"stroke-linecap","round"),t(h,"stroke-linejoin","round"),t(h,"d","M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"),t(r,"xmlns","http://www.w3.org/2000/svg"),t(r,"fill","none"),t(r,"viewBox","0 0 24 24"),t(r,"stroke-width","1.5"),t(r,"stroke","currentColor"),t(r,"class","w- h-"),t(r,"width","20"),t(r,"height","20")},m(c,i){W(c,e,i),u(e,a),W(c,s,i),W(c,r,i),u(r,h)},p(c,i){i&2&&l!==(l=c[1]("common.shorten")+"")&&K(a,l)},d(c){c&&d(e),c&&d(s),c&&d(r)}}}function He(o){let e,l,a,s=o[1]("common.long_url")+"",r,h,c,i,b,v,p,I=o[1]("common.short_key")+"",f,m,n,x,z,L,D,P,U,B,V,T,Y;D=new Fe({});function ee(g,E){return qe}let $=ee()(o);return{c(){e=k("form"),l=k("div"),a=k("label"),r=M(s),h=S(),c=k("input"),b=S(),v=k("div"),p=k("label"),f=M(I),m=S(),n=k("input"),z=S(),L=k("div"),ie(D.$$.fragment),P=S(),U=k("div"),B=k("button"),$.c(),this.h()},l(g){e=w(g,"FORM",{method:!0,action:!0,class:!0});var E=_(e);l=w(E,"DIV",{class:!0});var F=_(l);a=w(F,"LABEL",{for:!0,class:!0});var A=_(a);r=N(A,s),A.forEach(d),h=j(F),c=w(F,"INPUT",{id:!0,type:!0,name:!0,placeholder:!0,class:!0}),F.forEach(d),b=j(E),v=w(E,"DIV",{class:!0});var q=_(v);p=w(q,"LABEL",{for:!0,class:!0});var y=_(p);f=N(y,I),y.forEach(d),m=j(q),n=w(q,"INPUT",{id:!0,type:!0,name:!0,placeholder:!0,min:!0,class:!0}),z=j(q),L=w(q,"DIV",{class:!0,"data-tip":!0});var C=_(L);ue(D.$$.fragment,C),C.forEach(d),q.forEach(d),P=j(E),U=w(E,"DIV",{class:!0});var R=_(U);B=w(R,"BUTTON",{type:!0,class:!0});var J=_(B);$.l(J),J.forEach(d),R.forEach(d),E.forEach(d),this.h()},h(){t(a,"for","long_url"),t(a,"class","text- text-xs mb-1 block"),t(c,"id","long_url"),t(c,"type","text"),t(c,"name","long_url"),c.required=!0,t(c,"placeholder",i=o[1]("common.long_url_placeholder")),t(c,"class","svelte-18nogjd"),t(l,"class","form-group w-full sm:w-6/12"),t(p,"for","key"),t(p,"class","text- text-xs mb-1 block"),t(n,"id","key"),t(n,"type","text"),t(n,"name","key"),t(n,"placeholder",x=o[1]("common.short_key_placeholder")),t(n,"min","6"),t(n,"class","svelte-18nogjd"),t(L,"class","tooltip tooltip-bottom tooltip-neutral absolute top-[35%] translate-y-[28%] right-[4px] cursor-pointer"),t(L,"data-tip","You can create a meaningful name for the short url if you don't like system generated key ðŸ˜‰"),t(v,"class","form-group relative w-full sm:w-4/12"),t(B,"type","submit"),t(B,"class","btn-submit bg-primary rounded-lg py-2 px-3 flex items-center justify-center gap-2 w-full hover:shadow-xl transition-all duration-200"),t(U,"class","btn-submit-wrapper w-full sm:w-2/12 flex justify-end self-end svelte-18nogjd"),t(e,"method","POST"),t(e,"action",""),t(e,"class","link-form max-[420px]:rounded-none flex-column bg-neutral/20 rounded-[8px] py-6 px-5 mt-[16px] flex flex-wrap justify-between items-middle gap-5 svelte-18nogjd")},m(g,E){W(g,e,E),u(e,l),u(l,a),u(a,r),u(l,h),u(l,c),se(c,o[0].long_url),u(e,b),u(e,v),u(v,p),u(p,f),u(v,m),u(v,n),se(n,o[0].key),u(v,z),u(v,L),ce(D,L,null),u(e,P),u(e,U),u(U,B),$.m(B,null),V=!0,T||(Y=[he(c,"input",o[3]),he(n,"input",o[4]),he(e,"submit",Ce(o[2]))],T=!0)},p(g,[E]){(!V||E&2)&&s!==(s=g[1]("common.long_url")+"")&&K(r,s),(!V||E&2&&i!==(i=g[1]("common.long_url_placeholder")))&&t(c,"placeholder",i),E&1&&c.value!==g[0].long_url&&se(c,g[0].long_url),(!V||E&2)&&I!==(I=g[1]("common.short_key")+"")&&K(f,I),(!V||E&2&&x!==(x=g[1]("common.short_key_placeholder")))&&t(n,"placeholder",x),E&1&&n.value!==g[0].key&&se(n,g[0].key),$.p(g,E)},i(g){V||(X(D.$$.fragment,g),V=!0)},o(g){Z(D.$$.fragment,g),V=!1},d(g){g&&d(e),de(D),$.d(),T=!1,Ve(Y)}}}function Oe(o,e,l){let a,s,r,h;Q(o,_e,n=>l(6,a=n)),Q(o,je,n=>l(7,s=n)),Q(o,me,n=>l(8,r=n)),Q(o,Ie,n=>l(1,h=n));let c={};const i={long_url:"",key:""},b=()=>{window.innerWidth<=420&&pe(me,r=!0,r),window.innerWidth>420&&pe(me,r=!1,r)},v=(n=6)=>l(0,i.key=Ue(n),i),p=n=>!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(n),I=async()=>{if(p(i.long_url)){c={long_url:i.long_url,key:i.key===""?v():i.key,user_id:s==null?void 0:s.email};try{const{data:n,error:x}=await Pe.from("url_shortener_links").insert(c);if(console.log({data:n,error:x}),x){alert(x.message);return}v(),l(0,i.long_url="",i),l(0,i.key="",i),pe(_e,a=[{...c,total_clicks:0,created_at:new Date().toLocaleDateString()},...a],a)}catch(n){console.log(n)}}else{ze.push("Invalid URL",{theme:{"--toastBorderRadius":"8px","--toastBarBackground":"#FA193F","--toastMsgPadding":"0.5rem 1rem","--toastMinHeight":"3.0rem"}}),l(0,i.long_url="",i);return}};$e(()=>{b(),window.addEventListener("resize",()=>{b()})});function f(){i.long_url=this.value,l(0,i)}function m(){i.key=this.value,l(0,i)}return[i,h,I,f,m]}class We extends ae{constructor(e){super(),ne(this,e,Oe,He,oe,{})}}function Ke(o){let e,l=o[0].long_url.slice(0,20)+"...",a;return{c(){e=k("span"),a=M(l)},l(s){e=w(s,"SPAN",{});var r=_(e);a=N(r,l),r.forEach(d)},m(s,r){W(s,e,r),u(e,a)},p(s,r){r&1&&l!==(l=s[0].long_url.slice(0,20)+"...")&&K(a,l)},d(s){s&&d(e)}}}function Je(o){let e,l=o[0].long_url.slice(0,30)+"...",a;return{c(){e=k("span"),a=M(l)},l(s){e=w(s,"SPAN",{});var r=_(e);a=N(r,l),r.forEach(d)},m(s,r){W(s,e,r),u(e,a)},p(s,r){r&1&&l!==(l=s[0].long_url.slice(0,30)+"...")&&K(a,l)},d(s){s&&d(e)}}}function Qe(o){var q;let e,l,a,s,r,h=o[0].key+"",c,i,b,v,p,I,f,m,n,x=o[0].total_clicks+"",z,L,D,P,U,B,V,T=((q=o[0].created_at)==null?void 0:q.slice(0,10))+"",Y,ee,G,$,g;function E(y,C){return y[1]?Je:Ke}let F=E(o),A=F(o);return $=new Me({props:{key:o[0].key}}),{c(){e=k("div"),l=k("div"),a=k("div"),s=k("a"),r=M("/"),c=M(h),b=S(),v=k("div"),A.c(),p=S(),I=k("div"),f=k("div"),m=k("div"),n=k("span"),z=M(x),L=S(),D=H("svg"),P=H("path"),U=S(),B=k("div"),V=k("span"),Y=M(T),ee=S(),G=k("div"),ie($.$$.fragment),this.h()},l(y){e=w(y,"DIV",{class:!0});var C=_(e);l=w(C,"DIV",{class:!0});var R=_(l);a=w(R,"DIV",{class:!0});var J=_(a);s=w(J,"A",{class:!0,href:!0});var fe=_(s);r=N(fe,"/"),c=N(fe,h),fe.forEach(d),J.forEach(d),b=j(R),v=w(R,"DIV",{class:!0});var ve=_(v);A.l(ve),ve.forEach(d),R.forEach(d),p=j(C),I=w(C,"DIV",{class:!0});var te=_(I);f=w(te,"DIV",{class:!0});var le=_(f);m=w(le,"DIV",{class:!0});var re=_(m);n=w(re,"SPAN",{class:!0});var ge=_(n);z=N(ge,x),ge.forEach(d),L=j(re),D=O(re,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var ke=_(D);P=O(ke,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(P).forEach(d),ke.forEach(d),re.forEach(d),U=j(le),B=w(le,"DIV",{});var we=_(B);V=w(we,"SPAN",{class:!0});var ye=_(V);Y=N(ye,T),ye.forEach(d),we.forEach(d),le.forEach(d),ee=j(te),G=w(te,"DIV",{class:!0});var be=_(G);ue($.$$.fragment,be),be.forEach(d),te.forEach(d),C.forEach(d),this.h()},h(){t(s,"class","text-[20px]"),t(s,"href",i=`/dashboard/${o[0].key}`),t(a,"class","cursor-pointer"),t(v,"class","text-sm sm:text-base"),t(l,"class","max-[420px]:w-full w-1/2"),t(n,"class","leading-none text-"),t(P,"stroke-linecap","round"),t(P,"stroke-linejoin","round"),t(P,"d","M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"),t(D,"xmlns","http://www.w3.org/2000/svg"),t(D,"fill","none"),t(D,"viewBox","0 0 24 24"),t(D,"stroke-width","1.5"),t(D,"stroke","currentColor"),t(D,"class","w-4 h-4 ml-2"),t(m,"class","flex max-[420px]:w-full"),t(V,"class","text-sm sm:text-base"),t(f,"class","flex flex-col items-end justify-center"),t(G,"class","mr-[10px]"),t(I,"class","relative max-[420px]:w-full w-1/2 flex justify-end"),t(e,"class","wrapper max-[420px]:rounded-none max-[420px]:p-[10px] max-[420px]:flex-col w-full bg-neutral/10 rounded-xl p-5 mb-5 flex justify-between items-center gap-5 hover:border-secondary/50 transition-all duration-200")},m(y,C){W(y,e,C),u(e,l),u(l,a),u(a,s),u(s,r),u(s,c),u(l,b),u(l,v),A.m(v,null),u(e,p),u(e,I),u(I,f),u(f,m),u(m,n),u(n,z),u(m,L),u(m,D),u(D,P),u(f,U),u(f,B),u(B,V),u(V,Y),u(I,ee),u(I,G),ce($,G,null),g=!0},p(y,[C]){var J;(!g||C&1)&&h!==(h=y[0].key+"")&&K(c,h),(!g||C&1&&i!==(i=`/dashboard/${y[0].key}`))&&t(s,"href",i),F===(F=E(y))&&A?A.p(y,C):(A.d(1),A=F(y),A&&(A.c(),A.m(v,null))),(!g||C&1)&&x!==(x=y[0].total_clicks+"")&&K(z,x),(!g||C&1)&&T!==(T=((J=y[0].created_at)==null?void 0:J.slice(0,10))+"")&&K(Y,T);const R={};C&1&&(R.key=y[0].key),$.$set(R)},i(y){g||(X($.$$.fragment,y),g=!0)},o(y){Z($.$$.fragment,y),g=!1},d(y){y&&d(e),A.d(),de($)}}}function Ye(o,e,l){let a;Q(o,_e,r=>l(2,r)),Q(o,Le,r=>l(1,a=r));let{link:s}=e;return o.$$set=r=>{"link"in r&&l(0,s=r.link)},[s,a]}class Ge extends ae{constructor(e){super(),ne(this,e,Ye,Qe,oe,{link:0})}}function Ee(o,e,l){const a=o.slice();return a[2]=e[l],a}function De(o){let e,l;return e=new Ge({props:{link:o[2]}}),{c(){ie(e.$$.fragment)},l(a){ue(e.$$.fragment,a)},m(a,s){ce(e,a,s),l=!0},p(a,s){const r={};s&2&&(r.link=a[2]),e.$set(r)},i(a){l||(X(e.$$.fragment,a),l=!0)},o(a){Z(e.$$.fragment,a),l=!1},d(a){de(e,a)}}}function Xe(o){let e,l,a=o[0]("common.dashboard")+"",s,r,h,c,i,b;h=new We({});let v=o[1].data.links,p=[];for(let f=0;f<v.length;f+=1)p[f]=De(Ee(o,v,f));const I=f=>Z(p[f],1,1,()=>{p[f]=null});return{c(){e=k("section"),l=k("h1"),s=M(a),r=S(),ie(h.$$.fragment),c=S(),i=k("div");for(let f=0;f<p.length;f+=1)p[f].c();this.h()},l(f){e=w(f,"SECTION",{class:!0});var m=_(e);l=w(m,"H1",{class:!0});var n=_(l);s=N(n,a),n.forEach(d),r=j(m),ue(h.$$.fragment,m),c=j(m),i=w(m,"DIV",{class:!0});var x=_(i);for(let z=0;z<p.length;z+=1)p[z].l(x);x.forEach(d),m.forEach(d),this.h()},h(){t(l,"class","text-[22px] font-bold max-[410px]:px-[10px]"),t(i,"class","links-wrapper my-10"),t(e,"class","pt-28 mx- mx-auto bg-base-100")},m(f,m){W(f,e,m),u(e,l),u(l,s),u(e,r),ce(h,e,null),u(e,c),u(e,i);for(let n=0;n<p.length;n+=1)p[n].m(i,null);b=!0},p(f,[m]){if((!b||m&1)&&a!==(a=f[0]("common.dashboard")+"")&&K(s,a),m&2){v=f[1].data.links;let n;for(n=0;n<v.length;n+=1){const x=Ee(f,v,n);p[n]?(p[n].p(x,m),X(p[n],1)):(p[n]=De(x),p[n].c(),X(p[n],1),p[n].m(i,null))}for(Se(),n=v.length;n<p.length;n+=1)I(n);Ae()}},i(f){if(!b){X(h.$$.fragment,f);for(let m=0;m<v.length;m+=1)X(p[m]);b=!0}},o(f){Z(h.$$.fragment,f),p=p.filter(Boolean);for(let m=0;m<p.length;m+=1)Z(p[m]);b=!1},d(f){f&&d(e),de(h),Be(p,f)}}}function Ze(o,e,l){let a,s;return Q(o,Ie,r=>l(0,a=r)),Q(o,Ne,r=>l(1,s=r)),[a,s]}class ot extends ae{constructor(e){super(),ne(this,e,Ze,Xe,oe,{})}}export{ot as default};
